appId: com.decentraland.creatorshub

directories:
  output: dist
  buildResources: buildResources

files:
  - packages/**/dist/**

linux:
  target: deb

productName: Creators Hub
artifactName: '${productName}-${version}-${os}-${arch}.${ext}'

win:
  publisherName: 'Decentraland Foundation'
  appId: Decentraland.CreatorsHub
  icon: buildResources/icon.ico
  target:
    - target: nsis
      arch:
        - x64
  extraResources:
    - buildResources/icon.ico
  verifyUpdateCodeSignature: false

nsis:
  createDesktopShortcut: true
  installerSidebar: buildResources/background.bmp
  installerIcon: buildResources/icon.ico

dmg:
  title: Creators Hub Installer
  background: buildResources/background.png
  window:
    width: 714
    height: 472
  contents:
    - x: 230
      y: 215
      type: file
    - x: 460
      y: 215
      type: link
      path: /Applications
  # Disable generation of .zip.blockmap files (only on MacOS) because they take a lot of time to generate, fail frequently and are not even used by the auto updater due to the signing + notarization of dmg files
  # See this issue for more info: https://github.com/electron-userland/electron-builder/issues/2900#issuecomment-730571696
  writeUpdateInfo: false

mac:
  notarize:
    teamId: $APPLE_TEAM_ID
  target:
    - target: dmg
      arch: arm64
    - target: dmg
      arch: x64
    # We need to also build the .zip artifacts for the auto-updater to work https://github.com/electron-userland/electron-builder/issues/2199
    - target: zip
      arch: arm64
    - target: zip
      arch: x64

asarUnpack:
  - './node_modules/npm/**/*'
  - './package.json'

publish:
  - provider: github
    vPrefixedTagName: false
